<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>spacehakr • spacehakr</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="spacehakr"><meta property="og:image" content="http://www.newgraphenvironment.com/spacehakr/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">spacehakr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/NewGraphEnvironment/spacehakr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>spacehakr</h1>
      <small class="dont-index">Source: <a href="https://github.com/NewGraphEnvironment/spacehakr/blob/main/CLAUDE.md" class="external-link"><code>CLAUDE.md</code></a></small>
    </div>


<div id="spacehakr" class="section level1">

<p>R package for spatial analysis, raster processing, and geospatial data access. Extracted from the <code>ngr_spk_*</code> function family in the <a href="https://github.com/NewGraphEnvironment/ngr" class="external-link">ngr</a> package.</p>
<div class="section level2">
<h2 id="repository-context">Repository Context<a class="anchor" aria-label="anchor" href="#repository-context"></a></h2>
<p><strong>Repository:</strong> NewGraphEnvironment/spacehakr <strong>Primary Language:</strong> R <strong>License:</strong> MIT <strong>URL:</strong> <a href="http://www.newgraphenvironment.com/spacehakr/" class="uri">http://www.newgraphenvironment.com/spacehakr/</a></p>
</div>
<div class="section level2">
<h2 id="migration-from-ngr">Migration from ngr<a class="anchor" aria-label="anchor" href="#migration-from-ngr"></a></h2>
<p>Functions are renamed from <code>ngr_spk_*</code> to <code>spk_*</code>:</p>
<table class="table"><colgroup><col width="33%"><col width="33%"><col width="33%"></colgroup><thead><tr class="header"><th>ngr (source)</th>
<th>spacehakr (target)</th>
<th>Purpose</th>
</tr></thead><tbody><tr class="odd"><td><code>ngr_spk_gdalwarp()</code></td>
<td><code><a href="reference/spk_gdalwarp.html">spk_gdalwarp()</a></code></td>
<td>GDALWarp command argument builder</td>
</tr><tr class="even"><td><code>ngr_spk_geoserv_dlv()</code></td>
<td><code><a href="reference/spk_geoserv_dlv.html">spk_geoserv_dlv()</a></code></td>
<td>Download vector from GeoServer WFS</td>
</tr><tr class="odd"><td><code>ngr_spk_join()</code></td>
<td><code><a href="reference/spk_join.html">spk_join()</a></code></td>
<td>Spatial join with optional mask filtering</td>
</tr><tr class="even"><td><code>ngr_spk_layer_info()</code></td>
<td><code><a href="reference/spk_layer_info.html">spk_layer_info()</a></code></td>
<td>Summarise layers/geometry types in data source</td>
</tr><tr class="odd"><td><code>ngr_spk_odm()</code></td>
<td><code><a href="reference/spk_odm.html">spk_odm()</a></code></td>
<td>Docker command builder for OpenDroneMap</td>
</tr><tr class="even"><td><code>ngr_spk_poly_to_points()</code></td>
<td><code><a href="reference/spk_poly_to_points.html">spk_poly_to_points()</a></code></td>
<td>Generate regular points inside polygons</td>
</tr><tr class="odd"><td><code>ngr_spk_q_layer_info()</code></td>
<td><code><a href="reference/spk_q_layer_info.html">spk_q_layer_info()</a></code></td>
<td>Extract layer info from QGIS project</td>
</tr><tr class="even"><td><code>ngr_spk_rast_ext()</code></td>
<td><code><a href="reference/spk_rast_ext.html">spk_rast_ext()</a></code></td>
<td>Combined extent from multiple rasters</td>
</tr><tr class="odd"><td><code>ngr_spk_rast_not_empty()</code></td>
<td><code><a href="reference/spk_rast_not_empty.html">spk_rast_not_empty()</a></code></td>
<td>Check if raster has non-zero data</td>
</tr><tr class="even"><td><code>ngr_spk_rast_rm_empty()</code></td>
<td><code><a href="reference/spk_rast_rm_empty.html">spk_rast_rm_empty()</a></code></td>
<td>Remove empty raster files</td>
</tr><tr class="odd"><td><code>ngr_spk_res()</code></td>
<td><code><a href="reference/spk_res.html">spk_res()</a></code></td>
<td>Extract raster resolution</td>
</tr><tr class="even"><td><code>ngr_spk_stac_calc()</code></td>
<td><code><a href="reference/spk_stac_calc.html">spk_stac_calc()</a></code></td>
<td>Retrieve/calculate spectral indices from STAC</td>
</tr></tbody></table><p>Tests transfer with the same rename pattern.</p>
</div>
<div class="section level2">
<h2 id="build--test-commands">Build &amp; Test Commands<a class="anchor" aria-label="anchor" href="#build--test-commands"></a></h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">document</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">test</span><span class="op">(</span><span class="op">)</span>                    <span class="co"># Use this for development - faster</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">check</span><span class="op">(</span>vignettes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Only when needed; always skip vignettes</span></span>
<span><span class="fu">lintr</span><span class="fu">::</span><span class="fu">lint_package</span><span class="op">(</span><span class="op">)</span>               <span class="co"># Run before committing</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ul><li>Prefer <code>devtools::test()</code> during development - it’s faster</li>
<li>Only run <code>devtools::check()</code> when preparing for release or CI</li>
<li>Always skip vignettes during checks (<code>vignettes = FALSE</code>)</li>
</ul></div>
<div class="section level2">
<h2 id="function-naming">Function Naming<a class="anchor" aria-label="anchor" href="#function-naming"></a></h2>
<p>All exported functions use prefix <code>spk_</code>: - <code>spk_rast_*</code> - Raster operations - <code><a href="reference/spk_gdalwarp.html">spk_gdalwarp()</a></code>, <code><a href="reference/spk_odm.html">spk_odm()</a></code> - External tool command builders - <code>spk_geoserv_*</code>, <code>spk_stac_*</code> - Remote data access - <code><a href="reference/spk_join.html">spk_join()</a></code>, <code><a href="reference/spk_poly_to_points.html">spk_poly_to_points()</a></code>, <code><a href="reference/spk_layer_info.html">spk_layer_info()</a></code> - Vector/spatial operations</p>
</div>
<div class="section level2">
<h2 id="architecture">Architecture<a class="anchor" aria-label="anchor" href="#architecture"></a></h2>
<pre><code>R/                  # Function source files, one function per file
tests/testthat/     # testthat tests, one test file per function
man/                # Generated by roxygen2 (never edit manually)
vignettes/          # Long-form documentation
data-raw/           # Scripts for generating package data (hex sticker, etc.)
dev/                # Development scripts (not in package)</code></pre>
</div>
<div class="section level2">
<h2 id="key-dependencies">Key Dependencies<a class="anchor" aria-label="anchor" href="#key-dependencies"></a></h2>
<ul><li>
<strong>sf</strong> - Vector spatial data (simple features)</li>
<li>
<strong>terra</strong> - Raster operations</li>
<li>
<strong>chk</strong> - Argument validation (<code>chk_string()</code>, <code>chk_flag()</code>, etc.)</li>
<li>
<strong>cli</strong> - User messaging (<code>cli_abort()</code>, <code>cli_alert_success()</code>)</li>
<li>
<strong>dplyr/purrr/stringr</strong> - Data wrangling</li>
<li>
<strong>fs</strong> - File system operations</li>
<li>
<strong>glue</strong> - String interpolation</li>
<li>
<strong>httr/curl</strong> - HTTP requests</li>
<li>
<strong>xml2</strong> - XML parsing (QGIS project files)</li>
</ul><p>Vignette-only packages go in Suggests (e.g., rstac, leaflet, mapview).</p>
</div>
<div class="section level2">
<h2 id="documentation-style">Documentation Style<a class="anchor" aria-label="anchor" href="#documentation-style"></a></h2>
<ul><li>Roxygen2 with markdown enabled (<code>Roxygen: list(markdown = TRUE)</code>)</li>
<li>
<code>@family spacehakr</code> tag on all exported functions</li>
<li>
<code>@importFrom</code> for all external functions (explicit, never <code>@import</code>)</li>
<li>
<code>@examples</code> with <code>\dontrun{}</code> for slow/network examples</li>
<li>
<code>@seealso</code> for related functions</li>
</ul></div>
<div class="section level2">
<h2 id="code-quality-standards">Code Quality Standards<a class="anchor" aria-label="anchor" href="#code-quality-standards"></a></h2>
<div class="section level3">
<h3 id="lintr">lintr<a class="anchor" aria-label="anchor" href="#lintr"></a></h3>
<p>Use lintr for static analysis. Follow the default tidyverse style with: - Line length max 120 characters - snake_case for all names - No assignment with <code>=</code> (use <code>&lt;-</code>)</p>
</div>
<div class="section level3">
<h3 id="dry-dont-repeat-yourself">DRY (Don’t Repeat Yourself)<a class="anchor" aria-label="anchor" href="#dry-dont-repeat-yourself"></a></h3>
<ul><li>Extract shared logic into internal helpers (not exported, no <code>@export</code>)</li>
<li>Name internal helpers with a leading dot or descriptive name without <code>spk_</code> prefix</li>
<li>If the same pattern appears 3+ times, factor it out</li>
</ul></div>
<div class="section level3">
<h3 id="yagni-you-arent-gonna-need-it">YAGNI (You Aren’t Gonna Need It)<a class="anchor" aria-label="anchor" href="#yagni-you-arent-gonna-need-it"></a></h3>
<ul><li>Don’t add parameters “just in case”</li>
<li>Don’t write generalized versions of specific functions</li>
<li>If a feature isn’t needed now, don’t build it</li>
<li>Default parameter values should cover 90% of use cases</li>
</ul></div>
<div class="section level3">
<h3 id="kiss-keep-it-simple">KISS (Keep It Simple)<a class="anchor" aria-label="anchor" href="#kiss-keep-it-simple"></a></h3>
<ul><li>One function per file, named to match (<code>spk_join.R</code> contains <code><a href="reference/spk_join.html">spk_join()</a></code>)</li>
<li>Flat control flow preferred over deeply nested logic</li>
<li>Early returns for guard clauses</li>
<li>Pipe chains (<code>|&gt;</code>) for data transformation, not for side effects</li>
</ul></div>
<div class="section level3">
<h3 id="defensive-programming">Defensive Programming<a class="anchor" aria-label="anchor" href="#defensive-programming"></a></h3>
<ul><li>Validate all user-facing inputs with <code>chk</code> at function entry</li>
<li>Use <code><a href="https://cli.r-lib.org/reference/cli_abort.html" class="external-link">cli::cli_abort()</a></code> for errors with informative messages</li>
<li>Never silently swallow errors or warnings</li>
<li>Document expected types in <code>@param</code>
</li>
</ul></div>
</div>
<div class="section level2">
<h2 id="commit-style-fledge">Commit Style (fledge)<a class="anchor" aria-label="anchor" href="#commit-style-fledge"></a></h2>
<p>This repo uses <a href="https://github.com/cynkra/fledge" class="external-link">fledge</a> for changelog management.</p>
<p><strong>NEWS-worthy commits</strong> start with <code>-</code> (bullet point):</p>
<pre><code>- initial commit of [spk_join()] to close [#1](https://github.com/NewGraphEnvironment/spacehakr/issues/1)</code></pre>
<p><strong>Function references</strong> use square brackets for pkgdown auto-links: <code>[spk_join()]</code></p>
<p><strong>Issue references</strong> use full markdown links: <code>[#1](https://github.com/NewGraphEnvironment/spacehakr/issues/1)</code></p>
<p><strong>Non-NEWS commits</strong> (docs, chores) don’t start with <code>-</code>:</p>
<pre><code>rebuild documentation and update build config</code></pre>
</div>
<div class="section level2">
<h2 id="description-management">DESCRIPTION Management<a class="anchor" aria-label="anchor" href="#description-management"></a></h2>
<ul><li>Keep Imports alphabetized</li>
<li>Don’t duplicate packages in both Imports and Suggests</li>
<li>Add vignette-only packages to Suggests</li>
</ul></div>
<div class="section level2">
<h2 id="hex-sticker">Hex Sticker<a class="anchor" aria-label="anchor" href="#hex-sticker"></a></h2>
<p>Generate with <code>data-raw/make_hexsticker.R</code> using the hexSticker package. Black background, white NG icon, white “spacehakr” text, Helvetica font.</p>
</div>
<div class="section level2">
<h2 id="github-cli-gh-idiosyncrasies">GitHub CLI (gh) Idiosyncrasies<a class="anchor" aria-label="anchor" href="#github-cli-gh-idiosyncrasies"></a></h2>
<ul><li>
<strong>Use backticks for function names in issue titles</strong>: <code>gh issue create --title "Add \`spk_join()\`"</code>
</li>
<li>
<strong>No <code>gh milestone</code> command</strong> - use <code>gh api</code> for milestones</li>
<li><strong><code>--milestone</code> flag needs title, not number</strong></li>
</ul><hr></div>
</div>
<div class="section level1">
<h1 id="llm-behavioral-guidelines">LLM Behavioral Guidelines<a class="anchor" aria-label="anchor" href="#llm-behavioral-guidelines"></a></h1>
<p>Reduce common LLM coding mistakes. Bias toward caution over speed. For trivial tasks, use judgment.</p>
<div class="section level2">
<h2 id="id_1-think-before-coding">1. Think Before Coding<a class="anchor" aria-label="anchor" href="#id_1-think-before-coding"></a></h2>
<p><strong>Don’t assume. Don’t hide confusion. Surface tradeoffs.</strong></p>
<p>Before implementing: - State your assumptions explicitly. If uncertain, ask. - If multiple interpretations exist, present them - don’t pick silently. - If a simpler approach exists, say so. Push back when warranted. - If something is unclear, stop. Name what’s confusing. Ask.</p>
</div>
<div class="section level2">
<h2 id="id_2-simplicity-first">2. Simplicity First<a class="anchor" aria-label="anchor" href="#id_2-simplicity-first"></a></h2>
<p><strong>Minimum code that solves the problem. Nothing speculative.</strong></p>
<ul><li>No features beyond what was asked.</li>
<li>No abstractions for single-use code.</li>
<li>No “flexibility” or “configurability” that wasn’t requested.</li>
<li>No error handling for impossible scenarios.</li>
<li>If you write 200 lines and it could be 50, rewrite it.</li>
</ul><p>Ask yourself: “Would a senior engineer say this is overcomplicated?” If yes, simplify.</p>
</div>
<div class="section level2">
<h2 id="id_3-surgical-changes">3. Surgical Changes<a class="anchor" aria-label="anchor" href="#id_3-surgical-changes"></a></h2>
<p><strong>Touch only what you must. Clean up only your own mess.</strong></p>
<p>When editing existing code: - Don’t “improve” adjacent code, comments, or formatting. - Don’t refactor things that aren’t broken. - Match existing style, even if you’d do it differently. - If you notice unrelated dead code, mention it - don’t delete it.</p>
<p>When your changes create orphans: - Remove imports/variables/functions that YOUR changes made unused. - Don’t remove pre-existing dead code unless asked.</p>
<p>The test: Every changed line should trace directly to the user’s request.</p>
</div>
<div class="section level2">
<h2 id="id_4-goal-driven-execution">4. Goal-Driven Execution<a class="anchor" aria-label="anchor" href="#id_4-goal-driven-execution"></a></h2>
<p><strong>Define success criteria. Loop until verified.</strong></p>
<p>Transform tasks into verifiable goals: - “Add validation” -&gt; “Write tests for invalid inputs, then make them pass” - “Fix the bug” -&gt; “Write a test that reproduces it, then make it pass” - “Refactor X” -&gt; “Ensure tests pass before and after”</p>
<p>For multi-step tasks, state a brief plan:</p>
<pre><code>1. [Step] -&gt; verify: [check]
2. [Step] -&gt; verify: [check]
3. [Step] -&gt; verify: [check]</code></pre>
<hr><p><strong>These guidelines are working if:</strong> fewer unnecessary changes in diffs, fewer rewrites due to overcomplication, and clarifying questions come before implementation rather than after mistakes.</p>
</div>
</div>
<div class="section level1">
<h1 id="newgraph-environment-conventions">NewGraph Environment Conventions<a class="anchor" aria-label="anchor" href="#newgraph-environment-conventions"></a></h1>
<p>Core patterns for professional, efficient workflows across NewGraph repositories.</p>
<div class="section level2">
<h2 id="issue-creation-guidelines">Issue Creation Guidelines<a class="anchor" aria-label="anchor" href="#issue-creation-guidelines"></a></h2>
<div class="section level3">
<h3 id="professional-issue-writing">Professional Issue Writing<a class="anchor" aria-label="anchor" href="#professional-issue-writing"></a></h3>
<p>Write issues with clear technical focus:</p>
<ul><li>
<strong>Use normal technical language</strong> in titles and descriptions</li>
<li>
<strong>Focus on the problem and solution</strong> approach</li>
<li>
<strong>Avoid internal project codes or tracking references</strong> in the main description</li>
<li>
<strong>Add tracking links at the end</strong> if needed (e.g., <code>Relates to Owner/repo#N</code>)</li>
</ul><p><strong>Why:</strong> Issues are read by consultants, clients, and collaborators. Keep them professional and focused on technical content.</p>
</div>
<div class="section level3">
<h3 id="github-issue-creation---always-use-files">GitHub Issue Creation - Always Use Files<a class="anchor" aria-label="anchor" href="#github-issue-creation---always-use-files"></a></h3>
<p>The <code>gh issue create</code> command with heredoc syntax fails repeatedly with EOF errors. ALWAYS use intermediate file approach:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Write issue body to scratchpad file first</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> /path/to/scratchpad/issue_body.md <span class="op">&lt;&lt; 'EOF'</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="st">## Problem</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="st">...</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="st">## Proposed Solution</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="st">...</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co"># Then create issue from file</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="ex">gh</span> issue create <span class="at">--title</span> <span class="st">"Brief technical title"</span> <span class="at">--body-file</span> /path/to/scratchpad/issue_body.md</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="commit-quality">Commit Quality<a class="anchor" aria-label="anchor" href="#commit-quality"></a></h2>
<p>Write clear, informative commit messages:</p>
<pre><code>Brief description (50 chars or less)

Detailed explanation of changes and impact.
- What changed
- Why it changed
- Relevant context

Co-Authored-By: Claude Opus 4.6 &lt;noreply@anthropic.com&gt;</code></pre>
<p><strong>When to commit:</strong> - Logical, atomic units of work - Working state (tests pass) - Clear description of changes</p>
<p><strong>What to avoid:</strong> - “WIP” or “temp” commits in main branch - Combining unrelated changes - Vague messages like “fixes” or “updates”</p>
</div>
</div>


  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Allan Irvine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

